# Project Documentation: Grade Remarks Generator

**Course**: ITEP 308 – System Integration and Architecture I
**Project**: Web Application with Machine Learning Integration

---

## 1. Project Folder Explained

The project contains several core folders and files that define how the application runs.

- **`model/` Directory**: Stores the machine learning assets generated during training. It contains:
  - `grade-model.phpml`: The serialized KNN model saved using PHP-ML’s ModelManager. This binary file contains the "brain" of the AI—the stored training samples it uses for comparison.
  - `scaler.json`: Stores the computed means and standard deviations for each of the **five** numeric features (Student Behavior, Attendance, Assignment, Quiz, Exam). Both files are essential because prediction requires using the same scaling parameters applied during training.
- **`vendor/` Directory**: Generated by Composer and holds all dependencies (PHP-ML library).
- **`composer.json` & `composer.lock`**: Declares the dependency on `php-ai/php-ml` (version 0.10.0) and locks the exact version.
- **`index.php`**: The main entry point. It handles the User Interface, Form Submission, Prediction Logic, and displaying results.
- **`train.php`**: The script used to train the machine learning model from the database.
- **`db.php`**: Defines the MySQL connection using PDO.
- **`style.css`**: Defines the modern visual layout (Design System).

## 2. Application Logic Explained

### `train.php` — Machine Learning Training Script

`train.php` performs the complete ML pipeline. It acts as the "Teacher" that educates the AI model.

1.  **Data Retrieval**: Connects to the database and fetches all rows from the `training_data` table.
2.  **Feature Extraction**: Extracts **five** distinct numeric inputs:
    - `student_behavior`
    - `attendance_pct`
    - `assignment_avg`
    - `quiz_score`
    - `exam_score`
3.  **Data Normalization (Z-Score)**:
    Since KNN is distance-based, features with larger ranges (like 0-100) can overpower smaller ones. To fix this, the script calculates the **Mean** (average) and **Standard Deviation** for every feature column.
    It then transforms every single value using the formula:
    `NormalizedValue = (RawValue - Mean) / StandardDeviation`
    This puts all features on the same mathematical scale.
4.  **Training**: The script initializes a **K-Nearest Neighbors (KNN)** classifier with `k=3`. This means when predicting, the AI will look at the 3 closest matching students from history to decide the label.
5.  **Serialization**: The trained model `classifier` is saved to `model/grade-model.phpml`, and the normalization math (`means` and `stds`) is saved to `model/scaler.json`.

### `index.php` — User Interface & Prediction Pipeline

`index.php` is the "Front Desk" of the application. It handles the user's journey from input to result.

1.  **Form Input**: The user enters the Student Name and the 5 performance metrics.
2.  **Input Validation**: PHP checks if the inputs are valid numbers and not empty.
3.  **Preprocessing**:
    - The script loads the `scaler.json` file.
    - It applies the **exact same Z-score formula** to the user's input. This is critical—if we didn't do this, the AI would be comparing "Apples to Oranges".
4.  **Prediction**: The normalized input is fed into the loaded KNN model (`grade-model.phpml`). The model compares it against its training memory and returns the most likely remark (Excellent, Very Good, Good, Average, Fair, Poor).
5.  **Academic Grade Calculation**:
    The system independently calculates the academic grade using a Weighted Average formula:
    `Total Grade = (Quiz Score + Assignment Avg + Exam Score) / 3`
    _(Note: Student Behavior is excluded from this math as it is a behavioral metric, not an academic one, but it STILL influences the AI's remark)._
6.  **Dynamic Feedback**: The system looks up a "Feedback Map" array. Based on the predicted remark (e.g., "Excellent"), it randomly selects a praising sentence (e.g., "Exceptional performance") to display.
7.  **Data Persistence**: All these details—Name, 5 Raw Scores, Calculated Total, Predicted Remark—are saved into the `generator` table.
8.  **Post/Redirect/Get**: To prevent duplicate submissions when refreshing, the page saves the result in a Session and redirects to itself.

## 5. What the Project Is

This system is a **PHP Web Application with Machine Learning Integration**. It automates teacher workflows by converting student performance metrics into qualitative remark labels.

Users enter 5 key metrics:

1.  **Student Behavior** (Conduct)
2.  **Attendance %** (Participation)
3.  **Assignment Average** (Continuous Assessment)
4.  **Quiz Score** (Short Assessment)
5.  **Exam Score** (Major Assessment)

The ML model evaluates these patterns and returns a label such as **Excellent**, **Very Good**, **Good**, **Average**, **Fair**, or **Poor**. Results are instantaneous and stored for historical review.

## 10. Features

- **ML-Driven Predictions**: Uses K-Nearest Neighbors to classify student classification.
- **Dynamic Feedback**: Displays randomized, context-aware feedback messages.
- **Real-time Calculation**: Automatically computes Total Grade from academic scores.
- **Database Logging**: Stores history in the `generator` table for audit trails.
- **Data Management**: Allows users to delete old predictions from the UI.
- **Modern UI**: Fully responsive, premium CSS design.

## Database Explanation

The project uses two primary tables in the MySQL database:

### 1. `training_data` Table (The Teacher's Manual)

This table acts as the reference material for the AI. It contains historical or sample student data that the AI "studies" during the training process.

- **Columns**: `student_behavior`, `attendance_pct`, `assignment_avg`, `quiz_score`, `exam_score` (Inputs) and `remark` (Target Label).
- **Purpose**: Read-only during normal operation. Only accessed by `train.php`.
- **Label Mapping**: Contains samples for all categories: Excellent, Very Good, Good, Average, Fair, Poor.

### 2. `generator` Table (The Gradebook)

This table acts as the live record of all student grades generated by the system.

- **Columns**:
  - `student_name`: For identification.
  - `student_behavior`, `attendance_pct`, `assignment_avg`, `quiz_score`, `exam_score`: The raw scores entered by the teacher.
  - `total_grade`: The mathematically calculated academic average.
  - `predicted_remark`: The AI's qualitative output.
  - `created_at`: Timestamp of when the grade was generated.
- **Purpose**: Stores every submission. This data populates the "Recent Grades" table on the dashboard, allowing teachers to review their recent work.
